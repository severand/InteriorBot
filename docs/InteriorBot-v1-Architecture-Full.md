# InteriorBot v1 â€” ĞŸĞ¾Ğ»Ğ½Ğ°Ñ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ½Ğ°Ñ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ

## ĞĞ³Ğ»Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ
1. [ĞĞ±Ñ‰Ğ°Ñ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°](#Ğ¾Ğ±Ñ‰Ğ°Ñ-ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ°-Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°)
2. [Ğ”ĞµÑ‚Ğ°Ğ»ÑŒĞ½Ğ¾Ğµ Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğ¾Ğ²](#Ğ´ĞµÑ‚Ğ°Ğ»ÑŒĞ½Ğ¾Ğµ-Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ-ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğ¾Ğ²)
3. [Ğ‘Ğ°Ğ·Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…](#Ğ±Ğ°Ğ·Ğ°-Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…)
4. [ĞšĞ°Ñ€Ñ‚Ğ° ÑĞ²ÑĞ·ĞµĞ¹ Ğ¸ Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚ĞµĞ¹](#ĞºĞ°Ñ€Ñ‚Ğ°-ÑĞ²ÑĞ·ĞµĞ¹-Ğ¸-Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚ĞµĞ¹)
5. [ĞŸĞ¾Ğ»Ğ½Ğ°Ñ ĞºĞ°Ñ€Ñ‚Ğ° ĞºĞ½Ğ¾Ğ¿Ğ¾Ğº Ğ¸ Ğ¿ĞµÑ€ĞµÑ…Ğ¾Ğ´Ğ¾Ğ²](#Ğ¿Ğ¾Ğ»Ğ½Ğ°Ñ-ĞºĞ°Ñ€Ñ‚Ğ°-ĞºĞ½Ğ¾Ğ¿Ğ¾Ğº-Ğ¸-Ğ¿ĞµÑ€ĞµÑ…Ğ¾Ğ´Ğ¾Ğ²)
6. [FSM (Finite State Machine) â€” ĞœĞ°ÑˆĞ¸Ğ½Ğ° ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğ¹](#fsm-finite-state-machine--Ğ¼Ğ°ÑˆĞ¸Ğ½Ğ°-ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğ¹)
7. [Ğ‘Ğ¸Ğ·Ğ½ĞµÑ-Ğ»Ğ¾Ğ³Ğ¸ĞºĞ° Ğ¸ ÑÑ†ĞµĞ½Ğ°Ñ€Ğ¸Ğ¸](#Ğ±Ğ¸Ğ·Ğ½ĞµÑ-Ğ»Ğ¾Ğ³Ğ¸ĞºĞ°-Ğ¸-ÑÑ†ĞµĞ½Ğ°Ñ€Ğ¸Ğ¸)
8. [API Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ğ¸](#api-Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ğ¸)

---

## ĞĞ±Ñ‰Ğ°Ñ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°

```
InteriorBot/
â”œâ”€â”€ bot/                              # Ğ¯Ğ´Ñ€Ğ¾ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ
â”‚   â”œâ”€â”€ main.py                       # Ğ¢Ğ¾Ñ‡ĞºĞ° Ğ²Ñ…Ğ¾Ğ´Ğ°, Ğ¸Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ±Ğ¾Ñ‚Ğ°
â”‚   â”œâ”€â”€ config.py                     # ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ (Ñ‚Ğ¾ĞºĞµĞ½Ñ‹, ĞºĞ¾Ğ½ÑÑ‚Ğ°Ğ½Ñ‚Ñ‹)
â”‚   â”‚
â”‚   â”œâ”€â”€ database/                     # Ğ¡Ğ»Ğ¾Ğ¹ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹ Ñ Ğ‘Ğ”
â”‚   â”‚   â”œâ”€â”€ db.py                     # ĞšĞ»Ğ°ÑÑ Database Ñ async Ğ¼ĞµÑ‚Ğ¾Ğ´Ğ°Ğ¼Ğ¸
â”‚   â”‚   â””â”€â”€ models.py                 # SQL-ÑÑ…ĞµĞ¼Ñ‹ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ† Ğ¸ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑÑ‹
â”‚   â”‚
â”‚   â”œâ”€â”€ handlers/                     # ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸ĞºĞ¸ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğ¹/ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´
â”‚   â”‚   â”œâ”€â”€ user_start.py             # Ğ¡Ñ‚Ğ°Ñ€Ñ‚ Ğ±Ğ¾Ñ‚Ğ°, Ğ³Ğ»Ğ°Ğ²Ğ½Ğ¾Ğµ Ğ¼ĞµĞ½Ñ, Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»ÑŒ
â”‚   â”‚   â”œâ”€â”€ creation.py               # Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ´Ğ¸Ğ·Ğ°Ğ¹Ğ½Ğ° (FSM flow)
â”‚   â”‚   â””â”€â”€ payment.py                # ĞŸĞ¾ĞºÑƒĞ¿ĞºĞ° Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¹, Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ¾Ğ¿Ğ»Ğ°Ñ‚Ñ‹
â”‚   â”‚
â”‚   â”œâ”€â”€ keyboards/                    # Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ ĞºĞ»Ğ°Ğ²Ğ¸Ğ°Ñ‚ÑƒÑ€
â”‚   â”‚   â”œâ”€â”€ inline.py                 # Ğ’ÑĞµ inline-ĞºĞ»Ğ°Ğ²Ğ¸Ğ°Ñ‚ÑƒÑ€Ñ‹
â”‚   â”‚   â””â”€â”€ reply.py                  # Reply-ĞºĞ»Ğ°Ğ²Ğ¸Ğ°Ñ‚ÑƒÑ€Ñ‹ (Ğ¿Ğ¾ĞºĞ° Ğ½Ğµ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ)
â”‚   â”‚
â”‚   â”œâ”€â”€ services/                     # Ğ’Ğ½ĞµÑˆĞ½Ğ¸Ğµ Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ğ¸
â”‚   â”‚   â”œâ”€â”€ replicate_api.py          # Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğ¹ Ñ‡ĞµÑ€ĞµĞ· Replicate
â”‚   â”‚   â””â”€â”€ payment_api.py            # Ğ Ğ°Ğ±Ğ¾Ñ‚Ğ° Ñ Ğ®ĞšĞ°ÑÑĞ° (ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ/Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ¿Ğ»Ğ°Ñ‚ĞµĞ¶ĞµĞ¹)
â”‚   â”‚
â”‚   â”œâ”€â”€ states/                       # FSM ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ
â”‚   â”‚   â””â”€â”€ fsm.py                    # ĞĞ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ¸Ğµ Ğ²ÑĞµÑ… ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğ¹ (CreationStates)
â”‚   â”‚
â”‚   â””â”€â”€ utils/                        # Ğ£Ñ‚Ğ¸Ğ»Ğ¸Ñ‚Ñ‹ Ğ¸ Ğ²ÑĞ¿Ğ¾Ğ¼Ğ¾Ğ³Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸
â”‚       â”œâ”€â”€ texts.py                  # Ğ¢ĞµĞºÑÑ‚Ğ¾Ğ²Ñ‹Ğµ ĞºĞ¾Ğ½ÑÑ‚Ğ°Ğ½Ñ‚Ñ‹ Ğ´Ğ»Ñ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹
â”‚       â”œâ”€â”€ navigation.py             # ĞĞ°Ğ²Ğ¸Ğ³Ğ°Ñ†Ğ¸Ğ¾Ğ½Ğ½Ñ‹Ğµ Ñ…ĞµĞ»Ğ¿ĞµÑ€Ñ‹ (edit_menu, show_main_menu)
â”‚       â””â”€â”€ helpers.py                # Ğ”Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ Ñ…ĞµĞ»Ğ¿ĞµÑ€Ñ‹
â”‚
â”œâ”€â”€ check_token.py                    # Ğ¢ĞµÑÑ‚Ğ¾Ğ²Ñ‹Ğ¹ ÑĞºÑ€Ğ¸Ğ¿Ñ‚ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ¸ Ñ‚Ğ¾ĞºĞµĞ½Ğ° Replicate
â”œâ”€â”€ find_model.py                     # ĞŸĞ¾Ğ¸ÑĞº Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ñ‹Ñ… Ğ¼Ğ¾Ğ´ĞµĞ»ĞµĞ¹ Replicate
â”œâ”€â”€ list_models.py                    # Ğ¢ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ API Replicate
â”œâ”€â”€ test_replicate.py                 # ĞŸĞ¾Ğ»Ğ½Ñ‹Ğ¹ Ñ‚ĞµÑÑ‚ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ñ
â”œâ”€â”€ requirements.txt                  # Python Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸
â”œâ”€â”€ .env                              # ĞŸĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ñ (Ñ‚Ğ¾ĞºĞµĞ½Ñ‹, ĞºĞ»ÑÑ‡Ğ¸)
â””â”€â”€ README.md                         # ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°
```

---

## Ğ”ĞµÑ‚Ğ°Ğ»ÑŒĞ½Ğ¾Ğµ Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğ¾Ğ²

### 1. **bot/main.py** â€” Ğ¢Ğ¾Ñ‡ĞºĞ° Ğ²Ñ…Ğ¾Ğ´Ğ°

**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** Ğ˜Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ±Ğ¾Ñ‚Ğ°, Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ Ñ€Ğ¾ÑƒÑ‚ĞµÑ€Ğ¾Ğ², Ğ·Ğ°Ğ¿ÑƒÑĞº polling.

**ĞÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸:**
- Ğ˜Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ `Bot` Ğ¸ `Dispatcher` (aiogram 3.x)
- ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ Ğ±Ğ°Ğ·Ñ‹ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ñ‡ĞµÑ€ĞµĞ· `Database.init_db()`
- Ğ ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ Ñ€Ğ¾ÑƒÑ‚ĞµÑ€Ğ¾Ğ² Ğ² Ğ¿Ğ¾Ñ€ÑĞ´ĞºĞµ Ğ¿Ñ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚Ğ°:
  1. `user_start.router` â€” ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹ ÑÑ‚Ğ°Ñ€Ñ‚Ğ° Ğ¸ Ğ½Ğ°Ğ²Ğ¸Ğ³Ğ°Ñ†Ğ¸Ğ¸
  2. `creation.router` â€” Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑ ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ñ Ğ´Ğ¸Ğ·Ğ°Ğ¹Ğ½Ğ°
  3. `payment.router` â€” Ğ¾Ğ¿Ğ»Ğ°Ñ‚Ğ°
- ĞŸĞµÑ€ĞµĞ´Ğ°Ñ‡Ğ° ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚Ğ° (`admins`, `bot_token`) Ğ² dispatcher
- Ğ—Ğ°Ğ¿ÑƒÑĞº long polling

**Ğ—Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸:**
- `aiogram` (Bot, Dispatcher)
- `config.py` (Ñ‚Ğ¾ĞºĞµĞ½ Ğ±Ğ¾Ñ‚Ğ°, Ğ°Ğ´Ğ¼Ğ¸Ğ½-ID)
- `database.db` (Ğ¸Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ‘Ğ”)
- Ğ’ÑĞµ Ñ€Ğ¾ÑƒÑ‚ĞµÑ€Ñ‹ Ğ¸Ğ· `handlers/`

---

### 2. **bot/config.py** â€” ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ

**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** Ğ¥Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ²ÑĞµÑ… Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞº Ğ¸ ĞºĞ¾Ğ½ÑÑ‚Ğ°Ğ½Ñ‚ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°.

**Ğ¡Ğ¾Ğ´ĞµÑ€Ğ¶Ğ¸Ğ¼Ğ¾Ğµ:**

```python
ADMIN_IDS = [7884972750, 827652042, 5426993389, 6999935990]  # ID Ğ°Ğ´Ğ¼Ğ¸Ğ½Ğ¸ÑÑ‚Ñ€Ğ°Ñ‚Ğ¾Ñ€Ğ¾Ğ²

class Config:
    BOT_TOKEN = os.getenv('BOT_TOKEN')                      # Telegram Bot Token
    REPLICATE_API_TOKEN = os.getenv('REPLICATE_API_TOKEN')  # Replicate API Token
    YOOKASSA_SHOP_ID = os.getenv('YOOKASSA_SHOP_ID')        # ID Ğ¼Ğ°Ğ³Ğ°Ğ·Ğ¸Ğ½Ğ° Ğ®ĞšĞ°ÑÑĞ°
    YOOKASSA_SECRET_KEY = os.getenv('YOOKASSA_SECRET_KEY')  # Ğ¡ĞµĞºÑ€ĞµÑ‚Ğ½Ñ‹Ğ¹ ĞºĞ»ÑÑ‡ Ğ®ĞšĞ°ÑÑĞ°
    
    DB_PATH = 'bot.db'                                      # ĞŸÑƒÑ‚ÑŒ Ğº SQLite Ğ‘Ğ”
    FREE_GENERATIONS = 3                                     # Ğ‘ĞµÑĞ¿Ğ»Ğ°Ñ‚Ğ½Ñ‹Ğµ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸ Ğ´Ğ»Ñ Ğ½Ğ¾Ğ²Ñ‹Ñ… Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹
    
    PAYMENT_PACKAGES = {
        'small': {'tokens': 10, 'price': 290, 'name': '10 Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¹'},
        'medium': {'tokens': 25, 'price': 590, 'name': '25 Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¹'},
        'large': {'tokens': 60, 'price': 990, 'name': '60 Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¹'},
    }
```

**Ğ—Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸:**
- `.env` Ñ„Ğ°Ğ¹Ğ» Ñ Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğ¼Ğ¸ Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ñ
- `python-dotenv` Ğ´Ğ»Ñ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸ Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ñ…

---

### 3. **bot/database/** â€” Ğ¡Ğ»Ğ¾Ğ¹ Ğ±Ğ°Ğ·Ñ‹ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

#### **db.py** â€” ĞšĞ»Ğ°ÑÑ Database

**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** ĞÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ½Ğ°Ñ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ° Ñ SQLite Ñ‡ĞµÑ€ĞµĞ· `aiosqlite`.

**ĞÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ Ğ¼ĞµÑ‚Ğ¾Ğ´Ñ‹:**

| ĞœĞµÑ‚Ğ¾Ğ´ | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ | ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹ | Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚ |
|-------|----------|-----------|------------|
| `init_db()` | Ğ¡Ğ¾Ğ·Ğ´Ğ°ĞµÑ‚ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹ users Ğ¸ payments | â€” | None |
| `create_user(user_id, username)` | Ğ¡Ğ¾Ğ·Ğ´Ğ°ĞµÑ‚ Ğ½Ğ¾Ğ²Ğ¾Ğ³Ğ¾ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ Ñ 3 Ğ±ĞµÑĞ¿Ğ»Ğ°Ñ‚Ğ½Ñ‹Ğ¼Ğ¸ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸ÑĞ¼Ğ¸ | user_id, username | bool |
| `get_user(user_id)` | ĞŸĞ¾Ğ»ÑƒÑ‡Ğ°ĞµÑ‚ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ | user_id | Dict Ğ¸Ğ»Ğ¸ None |
| `get_balance(user_id)` | ĞŸĞ¾Ğ»ÑƒÑ‡Ğ°ĞµÑ‚ Ğ±Ğ°Ğ»Ğ°Ğ½Ñ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ | user_id | int |
| `increase_balance(user_id, amount)` | Ğ£Ğ²ĞµĞ»Ğ¸Ñ‡Ğ¸Ğ²Ğ°ĞµÑ‚ Ğ±Ğ°Ğ»Ğ°Ğ½Ñ | user_id, amount | bool |
| `decrease_balance(user_id)` | Ğ£Ğ¼ĞµĞ½ÑŒÑˆĞ°ĞµÑ‚ Ğ±Ğ°Ğ»Ğ°Ğ½Ñ Ğ½Ğ° 1 | user_id | bool |
| `create_payment(...)` | Ğ¡Ğ¾Ğ·Ğ´Ğ°ĞµÑ‚ Ğ·Ğ°Ğ¿Ğ¸ÑÑŒ Ğ¾ Ğ¿Ğ»Ğ°Ñ‚ĞµĞ¶Ğµ | user_id, payment_id, amount, tokens | bool |
| `get_last_pending_payment(user_id)` | ĞŸĞ¾Ğ»ÑƒÑ‡Ğ°ĞµÑ‚ Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğ¹ Ğ¾Ğ¶Ğ¸Ğ´Ğ°ÑÑ‰Ğ¸Ğ¹ Ğ¿Ğ»Ğ°Ñ‚ĞµĞ¶ | user_id | Dict Ğ¸Ğ»Ğ¸ None |
| `set_payment_success(payment_id)` | ĞŸĞ¾Ğ¼ĞµÑ‡Ğ°ĞµÑ‚ Ğ¿Ğ»Ğ°Ñ‚ĞµĞ¶ ĞºĞ°Ğº ÑƒÑĞ¿ĞµÑˆĞ½Ñ‹Ğ¹ | payment_id | bool |
| `add_tokens(user_id, tokens)` | Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ÑĞµÑ‚ Ñ‚Ğ¾ĞºĞµĞ½Ñ‹ (Ğ°Ğ»Ğ¸Ğ°Ñ increase_balance) | user_id, tokens | bool |

**Ğ—Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸:**
- `aiosqlite` Ğ´Ğ»Ñ Ğ°ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ½Ğ¾Ğ¹ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹ Ñ SQLite
- `database/models.py` Ğ´Ğ»Ñ SQL-Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²
- `config.py` Ğ´Ğ»Ñ Ğ¿ÑƒÑ‚Ğ¸ Ğº Ğ‘Ğ”

---

#### **models.py** â€” SQL ÑÑ…ĞµĞ¼Ñ‹

**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** Ğ¥Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ SQL-Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ² Ğ´Ğ»Ñ ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ñ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ† Ğ¸ CRUD Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¹.

**Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹:**

1. **users**
   - `user_id` (INTEGER PRIMARY KEY) â€” Telegram ID Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ
   - `username` (TEXT) â€” Username Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ
   - `balance` (INTEGER DEFAULT 3) â€” ĞšĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ñ‹Ñ… Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¹
   - `reg_date` (DATETIME) â€” Ğ”Ğ°Ñ‚Ğ° Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ğ¸

2. **payments**
   - `id` (INTEGER PRIMARY KEY AUTOINCREMENT) â€” Ğ’Ğ½ÑƒÑ‚Ñ€ĞµĞ½Ğ½Ğ¸Ğ¹ ID Ğ¿Ğ»Ğ°Ñ‚ĞµĞ¶Ğ°
   - `user_id` (INTEGER) â€” ID Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ
   - `yookassa_payment_id` (TEXT UNIQUE) â€” ID Ğ¿Ğ»Ğ°Ñ‚ĞµĞ¶Ğ° Ğ² Ğ®ĞšĞ°ÑÑĞµ
   - `amount` (INTEGER) â€” Ğ¡ÑƒĞ¼Ğ¼Ğ° Ğ¿Ğ»Ğ°Ñ‚ĞµĞ¶Ğ° Ğ² Ñ€ÑƒĞ±Ğ»ÑÑ…
   - `tokens` (INTEGER) â€” ĞšĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ ĞºÑƒĞ¿Ğ»ĞµĞ½Ğ½Ñ‹Ñ… Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¹
   - `status` (TEXT DEFAULT 'pending') â€” Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ: pending/succeeded/failed
   - `created_at` (DATETIME) â€” Ğ’Ñ€ĞµĞ¼Ñ ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ñ

---

### 4. **bot/states/fsm.py** â€” FSM ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ

**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** ĞĞ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ¸Ğµ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğ¹ Ğ´Ğ»Ñ Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑĞ° ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ñ Ğ´Ğ¸Ğ·Ğ°Ğ¹Ğ½Ğ°.

```python
class CreationStates(StatesGroup):
    waiting_for_photo = State()    # ĞĞ¶Ğ¸Ğ´Ğ°Ğ½Ğ¸Ğµ Ñ„Ğ¾Ñ‚Ğ¾ Ğ¾Ñ‚ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ
    choose_room = State()          # Ğ’Ñ‹Ğ±Ğ¾Ñ€ Ñ‚Ğ¸Ğ¿Ğ° ĞºĞ¾Ğ¼Ğ½Ğ°Ñ‚Ñ‹ (Ğ³Ğ¾ÑÑ‚Ğ¸Ğ½Ğ°Ñ, ÑĞ¿Ğ°Ğ»ÑŒĞ½Ñ Ğ¸ Ñ‚.Ğ´.)
    choose_style = State()         # Ğ’Ñ‹Ğ±Ğ¾Ñ€ ÑÑ‚Ğ¸Ğ»Ñ Ğ´Ğ¸Ğ·Ğ°Ğ¹Ğ½Ğ° (ÑĞºĞ°Ğ½Ğ´Ğ¸Ğ½Ğ°Ğ²ÑĞºĞ¸Ğ¹, Ğ»Ğ¾Ñ„Ñ‚ Ğ¸ Ñ‚.Ğ´.)
```

**Ğ›Ğ¾Ğ³Ğ¸ĞºĞ° Ğ¿ĞµÑ€ĞµÑ…Ğ¾Ğ´Ğ¾Ğ²:**
1. ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ½Ğ°Ğ¶Ğ¸Ğ¼Ğ°ĞµÑ‚ "Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ´Ğ¸Ğ·Ğ°Ğ¹Ğ½" â†’ `waiting_for_photo`
2. ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ Ñ„Ğ¾Ñ‚Ğ¾ â†’ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ÑĞµÑ‚ÑÑ, Ğ¿ĞµÑ€ĞµÑ…Ğ¾Ğ´ Ğ² `choose_room`
3. Ğ’Ñ‹Ğ±Ğ¸Ñ€Ğ°ĞµÑ‚ Ñ‚Ğ¸Ğ¿ ĞºĞ¾Ğ¼Ğ½Ğ°Ñ‚Ñ‹ â†’ Ğ¿ĞµÑ€ĞµÑ…Ğ¾Ğ´ Ğ² `choose_style`
4. Ğ’Ñ‹Ğ±Ğ¸Ñ€Ğ°ĞµÑ‚ ÑÑ‚Ğ¸Ğ»ÑŒ â†’ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ â†’ Ğ¾Ñ‡Ğ¸ÑÑ‚ĞºĞ° ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ

---

### 5. **bot/keyboards/inline.py** â€” Inline ĞºĞ»Ğ°Ğ²Ğ¸Ğ°Ñ‚ÑƒÑ€Ñ‹

**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ Ğ²ÑĞµÑ… inline-ĞºĞ½Ğ¾Ğ¿Ğ¾Ğº Ğ´Ğ»Ñ Ğ½Ğ°Ğ²Ğ¸Ğ³Ğ°Ñ†Ğ¸Ğ¸.

**ĞÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸-Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ‚Ğ¾Ñ€Ñ‹:**

| Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ñ | ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ | ĞšĞ½Ğ¾Ğ¿ĞºĞ¸ | callback_data |
|---------|-----------|--------|---------------|
| `get_main_menu_keyboard()` | Ğ“Ğ»Ğ°Ğ²Ğ½Ğ¾Ğµ Ğ¼ĞµĞ½Ñ | ğŸ¨ Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ´Ğ¸Ğ·Ğ°Ğ¹Ğ½<br>ğŸ‘¤ ĞŸÑ€Ğ¾Ñ„Ğ¸Ğ»ÑŒ | `create_design`<br>`show_profile` |
| `get_profile_keyboard()` | ĞŸÑ€Ğ¾Ñ„Ğ¸Ğ»ÑŒ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ | ğŸ’° ĞšÑƒĞ¿Ğ¸Ñ‚ÑŒ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸<br>ğŸ  Ğ“Ğ»Ğ°Ğ²Ğ½Ğ¾Ğµ Ğ¼ĞµĞ½Ñ | `buy_generations`<br>`main_menu` |
| `get_room_keyboard()` | Ğ’Ñ‹Ğ±Ğ¾Ñ€ Ñ‚Ğ¸Ğ¿Ğ° ĞºĞ¾Ğ¼Ğ½Ğ°Ñ‚Ñ‹ | Ğ“Ğ¾ÑÑ‚Ğ¸Ğ½Ğ°Ñ ğŸ›‹ï¸<br>Ğ¡Ğ¿Ğ°Ğ»ÑŒĞ½Ñ ğŸ›Œ<br>ĞšÑƒÑ…Ğ½Ñ ğŸ½ï¸<br>ĞÑ„Ğ¸Ñ ğŸ–¥ï¸<br>ğŸ  Ğ“Ğ»Ğ°Ğ²Ğ½Ğ¾Ğµ Ğ¼ĞµĞ½Ñ | `room_living_room`<br>`room_bedroom`<br>`room_kitchen`<br>`room_office`<br>`main_menu` |
| `get_style_keyboard()` | Ğ’Ñ‹Ğ±Ğ¾Ñ€ ÑÑ‚Ğ¸Ğ»Ñ (10 ÑÑ‚Ğ¸Ğ»ĞµĞ¹) | Ğ¡Ğ¾Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğ¹<br>ĞœĞ¸Ğ½Ğ¸Ğ¼Ğ°Ğ»Ğ¸Ğ·Ğ¼<br>Ğ¡ĞºĞ°Ğ½Ğ´Ğ¸Ğ½Ğ°Ğ²ÑĞºĞ¸Ğ¹<br>... (10 ÑˆÑ‚ÑƒĞº Ğ¿Ğ¾ 2 Ğ² Ñ€ÑĞ´)<br>â¬…ï¸ Ğš Ğ²Ñ‹Ğ±Ğ¾Ñ€Ñƒ ĞºĞ¾Ğ¼Ğ½Ğ°Ñ‚Ñ‹<br>ğŸ  Ğ“Ğ»Ğ°Ğ²Ğ½Ğ¾Ğµ Ğ¼ĞµĞ½Ñ | `style_modern`<br>`style_minimalist`<br>`style_scandinavian`<br>...<br>`back_to_room`<br>`main_menu` |
| `get_payment_keyboard()` | Ğ’Ñ‹Ğ±Ğ¾Ñ€ Ğ¿Ğ°ĞºĞµÑ‚Ğ° Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¹ | 10 Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¹ - 290 Ñ€ÑƒĞ±.<br>25 Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¹ - 490 Ñ€ÑƒĞ±.<br>60 Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¹ - 990 Ñ€ÑƒĞ±.<br>â¬…ï¸ ĞĞ°Ğ·Ğ°Ğ´ Ğ² Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»ÑŒ<br>ğŸ  Ğ“Ğ»Ğ°Ğ²Ğ½Ğ¾Ğµ Ğ¼ĞµĞ½Ñ | `pay_10_290`<br>`pay_25_490`<br>`pay_60_990`<br>`show_profile`<br>`main_menu` |
| `get_payment_check_keyboard(url)` | ĞŸĞ¾ÑĞ»Ğµ ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ñ Ğ¿Ğ»Ğ°Ñ‚ĞµĞ¶Ğ° | ğŸ’° ĞŸĞµÑ€ĞµĞ¹Ñ‚Ğ¸ Ğº Ğ¾Ğ¿Ğ»Ğ°Ñ‚Ğµ (url)<br>ğŸ”„ Ğ¯ Ğ¾Ğ¿Ğ»Ğ°Ñ‚Ğ¸Ğ»! (ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ)<br>â¬…ï¸ ĞĞ°Ğ·Ğ°Ğ´ Ğ² Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»ÑŒ<br>ğŸ  Ğ“Ğ»Ğ°Ğ²Ğ½Ğ¾Ğµ Ğ¼ĞµĞ½Ñ | â€”<br>`check_payment`<br>`show_profile`<br>`main_menu` |
| `get_post_generation_keyboard()` | ĞŸĞ¾ÑĞ»Ğµ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸ Ğ´Ğ¸Ğ·Ğ°Ğ¹Ğ½Ğ° | ğŸ”„ Ğ”Ñ€ÑƒĞ³Ğ¾Ğ¹ ÑÑ‚Ğ¸Ğ»ÑŒ Ğ´Ğ»Ñ ÑÑ‚Ğ¾Ğ³Ğ¾ Ñ„Ğ¾Ñ‚Ğ¾<br>ğŸ“¸ Ğ—Ğ°Ğ³Ñ€ÑƒĞ·Ğ¸Ñ‚ÑŒ Ğ½Ğ¾Ğ²Ğ¾Ğµ Ñ„Ğ¾Ñ‚Ğ¾<br>ğŸ‘¤ ĞŸĞµÑ€ĞµĞ¹Ñ‚Ğ¸ Ğ² Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»ÑŒ<br>ğŸ  Ğ“Ğ»Ğ°Ğ²Ğ½Ğ¾Ğµ Ğ¼ĞµĞ½Ñ | `change_style`<br>`create_design`<br>`show_profile`<br>`main_menu` |

**ĞšĞ¾Ğ½ÑÑ‚Ğ°Ğ½Ñ‚Ñ‹ ÑÑ‚Ğ¸Ğ»ĞµĞ¹:**

```python
STYLE_TYPES = [
    ("modern", "Ğ¡Ğ¾Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğ¹"),
    ("minimalist", "ĞœĞ¸Ğ½Ğ¸Ğ¼Ğ°Ğ»Ğ¸Ğ·Ğ¼"),
    ("scandinavian", "Ğ¡ĞºĞ°Ğ½Ğ´Ğ¸Ğ½Ğ°Ğ²ÑĞºĞ¸Ğ¹"),
    ("industrial", "Ğ˜Ğ½Ğ´ÑƒÑÑ‚Ñ€Ğ¸Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ (Ğ»Ğ¾Ñ„Ñ‚)"),
    ("rustic", "Ğ ÑƒÑÑ‚Ğ¸Ğº"),
    ("japandi", "Ğ”Ğ¶Ğ°Ğ¿Ğ°Ğ½Ğ´Ğ¸"),
    ("boho", "Ğ‘Ğ¾Ñ…Ğ¾ / Ğ­ĞºĞ»ĞµĞºÑ‚Ğ¸ĞºĞ°"),
    ("mediterranean", "Ğ¡Ñ€ĞµĞ´Ğ¸Ğ·ĞµĞ¼Ğ½Ğ¾Ğ¼Ğ¾Ñ€ÑĞºĞ¸Ğ¹"),
    ("midcentury", "Midâ€‘century / Ğ²Ğ¸Ğ½Ñ‚Ğ°Ğ¶"),
    ("artdeco", "ĞÑ€â€‘Ğ´ĞµĞºĞ¾"),
]
```

---

### 6. **bot/utils/texts.py** â€” Ğ¢ĞµĞºÑÑ‚Ğ¾Ğ²Ñ‹Ğµ ĞºĞ¾Ğ½ÑÑ‚Ğ°Ğ½Ñ‚Ñ‹

**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** Ğ¥Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ²ÑĞµÑ… Ñ‚ĞµĞºÑÑ‚Ğ¾Ğ² Ğ´Ğ»Ñ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹ Ğ±Ğ¾Ñ‚Ğ°.

**ĞÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ ĞºĞ¾Ğ½ÑÑ‚Ğ°Ğ½Ñ‚Ñ‹:**

| ĞšĞ¾Ğ½ÑÑ‚Ğ°Ğ½Ñ‚Ğ° | ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ | Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ Ğ² |
|-----------|-----------|----------------|
| `START_TEXT` | ĞŸÑ€Ğ¸Ğ²ĞµÑ‚ÑÑ‚Ğ²Ğ¸Ğµ Ğ¿Ñ€Ğ¸ /start | `user_start.py` |
| `MAIN_MENU_TEXT` | Ğ¢ĞµĞºÑÑ‚ Ğ³Ğ»Ğ°Ğ²Ğ½Ğ¾Ğ³Ğ¾ Ğ¼ĞµĞ½Ñ | `creation.py`, `payment.py` |
| `PROFILE_TEXT` | Ğ¨Ğ°Ğ±Ğ»Ğ¾Ğ½ Ñ‚ĞµĞºÑÑ‚Ğ° Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»Ñ | `user_start.py`, `creation.py`, `payment.py` |
| `UPLOAD_PHOTO_TEXT` | Ğ˜Ğ½ÑÑ‚Ñ€ÑƒĞºÑ†Ğ¸Ñ Ğ´Ğ»Ñ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸ Ñ„Ğ¾Ñ‚Ğ¾ | `user_start.py`, `creation.py` |
| `PHOTO_SAVED_TEXT` | ĞŸĞ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ¸Ğµ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ñ Ñ„Ğ¾Ñ‚Ğ¾ | `creation.py` |
| `CHOOSE_STYLE_TEXT` | Ğ˜Ğ½ÑÑ‚Ñ€ÑƒĞºÑ†Ğ¸Ñ Ğ²Ñ‹Ğ±Ğ¾Ñ€Ğ° ÑÑ‚Ğ¸Ğ»Ñ | `creation.py` |
| `NO_BALANCE_TEXT` | Ğ£Ğ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğµ Ğ¾ Ğ½ÑƒĞ»ĞµĞ²Ğ¾Ğ¼ Ğ±Ğ°Ğ»Ğ°Ğ½ÑĞµ | `creation.py` |
| `TOO_MANY_PHOTOS_TEXT` | ĞŸÑ€ĞµĞ´ÑƒĞ¿Ñ€ĞµĞ¶Ğ´ĞµĞ½Ğ¸Ğµ Ğ¾Ğ± Ğ°Ğ»ÑŒĞ±Ğ¾Ğ¼Ğµ Ñ„Ğ¾Ñ‚Ğ¾ | `creation.py` |
| `PAYMENT_CREATED` | Ğ¨Ğ°Ğ±Ğ»Ğ¾Ğ½ Ñ‚ĞµĞºÑÑ‚Ğ° Ğ¿Ğ¾ÑĞ»Ğµ ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ñ Ğ¿Ğ»Ğ°Ñ‚ĞµĞ¶Ğ° | `payment.py` |
| `PAYMENT_SUCCESS_TEXT` | Ğ£ÑĞ¿ĞµÑˆĞ½Ğ°Ñ Ğ¾Ğ¿Ğ»Ğ°Ñ‚Ğ° | `payment.py` |
| `PAYMENT_ERROR_TEXT` | ĞÑˆĞ¸Ğ±ĞºĞ° Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ¸ Ğ¿Ğ»Ğ°Ñ‚ĞµĞ¶Ğ° | `payment.py` |

---

## Ğ‘Ğ°Ğ·Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

### Ğ¡Ñ…ĞµĞ¼Ğ° Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†

```sql
-- Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ° Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹
CREATE TABLE users (
    user_id INTEGER PRIMARY KEY,           -- Telegram ID
    username TEXT,                         -- Username Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ
    balance INTEGER DEFAULT 3,             -- Ğ‘Ğ°Ğ»Ğ°Ğ½Ñ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¹
    reg_date DATETIME DEFAULT CURRENT_TIMESTAMP  -- Ğ”Ğ°Ñ‚Ğ° Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ğ¸
);

-- Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ° Ğ¿Ğ»Ğ°Ñ‚ĞµĞ¶ĞµĞ¹
CREATE TABLE payments (
    id INTEGER PRIMARY KEY AUTOINCREMENT,  -- Ğ’Ğ½ÑƒÑ‚Ñ€ĞµĞ½Ğ½Ğ¸Ğ¹ ID
    user_id INTEGER NOT NULL,              -- Ğ¡Ğ²ÑĞ·ÑŒ Ñ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¼
    yookassa_payment_id TEXT UNIQUE NOT NULL,  -- ID Ğ¿Ğ»Ğ°Ñ‚ĞµĞ¶Ğ° Ğ² Ğ®ĞšĞ°ÑÑĞµ
    amount INTEGER NOT NULL,               -- Ğ¡ÑƒĞ¼Ğ¼Ğ° Ğ² Ñ€ÑƒĞ±Ğ»ÑÑ…
    tokens INTEGER NOT NULL,               -- ĞšĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¹
    status TEXT DEFAULT 'pending',         -- pending/succeeded/failed
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,  -- Ğ’Ñ€ĞµĞ¼Ñ ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ñ
    FOREIGN KEY (user_id) REFERENCES users(user_id)
);
```

### Ğ–Ğ¸Ğ·Ğ½ĞµĞ½Ğ½Ñ‹Ğ¹ Ñ†Ğ¸ĞºĞ» Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

1. **ĞĞ¾Ğ²Ñ‹Ğ¹ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ:**
   - ĞšĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ° `/start` â†’ ÑĞ¾Ğ·Ğ´Ğ°ĞµÑ‚ÑÑ Ğ·Ğ°Ğ¿Ğ¸ÑÑŒ Ğ² `users` Ñ `balance=3`

2. **Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ Ğ´Ğ¸Ğ·Ğ°Ğ¹Ğ½Ğ°:**
   - ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ±Ğ°Ğ»Ğ°Ğ½ÑĞ° â†’ ĞµÑĞ»Ğ¸ `balance > 0`, Ñ‚Ğ¾ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ
   - ĞŸĞ¾ÑĞ»Ğµ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸: `balance = balance - 1`
   - ĞĞ´Ğ¼Ğ¸Ğ½Ñ‹ Ğ³ĞµĞ½ĞµÑ€Ğ¸Ñ€ÑƒÑÑ‚ Ğ±ĞµĞ· ÑĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ñ Ğ±Ğ°Ğ»Ğ°Ğ½ÑĞ°

3. **ĞŸĞ¾ĞºÑƒĞ¿ĞºĞ° Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¹:**
   - Ğ¡Ğ¾Ğ·Ğ´Ğ°ĞµÑ‚ÑÑ Ğ·Ğ°Ğ¿Ğ¸ÑÑŒ Ğ² `payments` ÑĞ¾ ÑÑ‚Ğ°Ñ‚ÑƒÑĞ¾Ğ¼ `pending`
   - ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ¾Ğ¿Ğ»Ğ°Ñ‡Ğ¸Ğ²Ğ°ĞµÑ‚ Ñ‡ĞµÑ€ĞµĞ· Ğ®ĞšĞ°ÑÑÑƒ
   - ĞŸÑ€Ğ¸ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞµ ÑÑ‚Ğ°Ñ‚ÑƒÑĞ°:
     - Ğ•ÑĞ»Ğ¸ `succeeded` â†’ `status` Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ÑĞµÑ‚ÑÑ + `balance` ÑƒĞ²ĞµĞ»Ğ¸Ñ‡Ğ¸Ğ²Ğ°ĞµÑ‚ÑÑ Ğ½Ğ° `tokens`

---

## ĞšĞ°Ñ€Ñ‚Ğ° ÑĞ²ÑĞ·ĞµĞ¹ Ğ¸ Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚ĞµĞ¹

### ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ½Ğ°Ñ ÑÑ…ĞµĞ¼Ğ° Ğ¿Ğ¾Ñ‚Ğ¾ĞºĞ¾Ğ² Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              USER                                   â”‚
â”‚                         (Telegram Client)                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          BOT MAIN.PY                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚ Bot Init    â”‚  â”‚ Dispatcher  â”‚  â”‚ DB Init     â”‚                â”‚
â”‚  â”‚ (aiogram)   â”‚  â”‚ (routers)   â”‚  â”‚ (SQLite)    â”‚                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                  â”‚                 â”‚
       â–¼                  â–¼                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ user_start   â”‚  â”‚ creation     â”‚  â”‚ payment      â”‚
â”‚ .router      â”‚  â”‚ .router      â”‚  â”‚ .router      â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                  â”‚                 â”‚
       â”‚                  â”‚                 â”‚
       â–¼                  â–¼                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               KEYBOARDS (inline.py)              â”‚
â”‚  Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ Ğ²ÑĞµÑ… inline ĞºĞ»Ğ°Ğ²Ğ¸Ğ°Ñ‚ÑƒÑ€                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                  â”‚                 â”‚
       â–¼                  â–¼                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Database     â”‚  â”‚ Replicate    â”‚  â”‚ YooKassa     â”‚
â”‚ (db.py)      â”‚  â”‚ API Service  â”‚  â”‚ Payment API  â”‚
â”‚              â”‚  â”‚              â”‚  â”‚              â”‚
â”‚ - users      â”‚  â”‚ - generate   â”‚  â”‚ - create     â”‚
â”‚ - payments   â”‚  â”‚   image      â”‚  â”‚ - check      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Ğ”ĞµÑ‚Ğ°Ğ»ÑŒĞ½Ğ°Ñ ĞºĞ°Ñ€Ñ‚Ğ° Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚ĞµĞ¹ Ğ¼Ğ¾Ğ´ÑƒĞ»ĞµĞ¹

```
main.py
â”œâ”€â”€ imports: aiogram (Bot, Dispatcher)
â”œâ”€â”€ imports: config (BOT_TOKEN, ADMIN_IDS, DB_PATH)
â”œâ”€â”€ imports: database.db (Database class)
â”œâ”€â”€ imports: handlers.user_start (router)
â”œâ”€â”€ imports: handlers.creation (router)
â”œâ”€â”€ imports: handlers.payment (router)
â””â”€â”€ injects context: admins, bot_token â†’ dispatcher

user_start.py
â”œâ”€â”€ imports: aiogram (Router, F, Message, CallbackQuery)
â”œâ”€â”€ imports: database.db (db instance)
â”œâ”€â”€ imports: states.fsm (CreationStates)
â”œâ”€â”€ imports: keyboards.inline (get_main_menu_keyboard, get_profile_keyboard)
â”œâ”€â”€ imports: utils.texts (START_TEXT, PROFILE_TEXT, UPLOAD_PHOTO_TEXT)
â”œâ”€â”€ imports: utils.navigation (edit_menu, show_main_menu)
â””â”€â”€ handlers:
    â”œâ”€â”€ /start â†’ cmd_start()
    â”œâ”€â”€ callback "main_menu" â†’ back_to_main_menu()
    â”œâ”€â”€ callback "show_profile" â†’ show_profile()
    â”œâ”€â”€ callback "buy_generations" â†’ buy_generations_handler()
    â””â”€â”€ callback "create_design" â†’ start_creation()

creation.py
â”œâ”€â”€ imports: aiogram (Router, F, Message, CallbackQuery)
â”œâ”€â”€ imports: database.db (db instance)
â”œâ”€â”€ imports: states.fsm (CreationStates)
â”œâ”€â”€ imports: keyboards.inline (get_room_keyboard, get_style_keyboard, ...)
â”œâ”€â”€ imports: services.replicate_api (generate_image)
â”œâ”€â”€ imports: utils.texts (CHOOSE_STYLE_TEXT, NO_BALANCE_TEXT, ...)
â””â”€â”€ handlers:
    â”œâ”€â”€ callback "main_menu" â†’ go_to_main_menu()
    â”œâ”€â”€ callback "create_design" â†’ choose_new_photo()
    â”œâ”€â”€ message[photo] + state[waiting_for_photo] â†’ photo_uploaded()
    â”œâ”€â”€ callback "room_*" + state[choose_room] â†’ room_chosen()
    â”œâ”€â”€ callback "back_to_room" + state[choose_style] â†’ back_to_room_selection()
    â”œâ”€â”€ callback "style_*" + state[choose_style] â†’ style_chosen() [Ğ“Ğ•ĞĞ•Ğ ĞĞ¦Ğ˜Ğ¯]
    â”œâ”€â”€ callback "change_style" â†’ change_style_after_gen()
    â””â”€â”€ callback "show_profile" â†’ show_profile_handler()

payment.py
â”œâ”€â”€ imports: aiogram (Router, F, CallbackQuery)
â”œâ”€â”€ imports: database.db (db instance)
â”œâ”€â”€ imports: keyboards.inline (get_payment_keyboard, get_payment_check_keyboard, ...)
â”œâ”€â”€ imports: services.payment_api (create_payment_yookassa, find_payment)
â”œâ”€â”€ imports: utils.texts (PAYMENT_CREATED, PAYMENT_SUCCESS_TEXT, ...)
â””â”€â”€ handlers:
    â”œâ”€â”€ callback "buy_generations" â†’ show_packages()
    â”œâ”€â”€ callback "main_menu" â†’ back_to_main_menu()
    â”œâ”€â”€ callback "pay_*" â†’ create_payment()
    â”œâ”€â”€ callback "check_payment" â†’ check_payment()
    â””â”€â”€ callback "show_profile" â†’ show_profile_payment()

database/db.py
â”œâ”€â”€ imports: aiosqlite
â”œâ”€â”€ imports: config (config.FREE_GENERATIONS, config.DB_PATH)
â”œâ”€â”€ imports: database.models (SQL queries)
â””â”€â”€ methods: init_db, create_user, get_balance, decrease_balance, ...

services/replicate_api.py
â”œâ”€â”€ imports: replicate, httpx
â”œâ”€â”€ imports: config (REPLICATE_API_TOKEN)
â””â”€â”€ function: generate_image(photo_id, room, style, bot_token) â†’ image_url

services/payment_api.py
â”œâ”€â”€ imports: yookassa
â”œâ”€â”€ imports: config (YOOKASSA_SHOP_ID, YOOKASSA_SECRET_KEY)
â””â”€â”€ functions:
    â”œâ”€â”€ create_payment_yookassa(amount, user_id, tokens) â†’ payment_data
    â””â”€â”€ find_payment(payment_id) â†’ bool (is_paid)
```

---

## ĞŸĞ¾Ğ»Ğ½Ğ°Ñ ĞºĞ°Ñ€Ñ‚Ğ° ĞºĞ½Ğ¾Ğ¿Ğ¾Ğº Ğ¸ Ğ¿ĞµÑ€ĞµÑ…Ğ¾Ğ´Ğ¾Ğ²

### Ğ’Ğ¸Ğ·ÑƒĞ°Ğ»ÑŒĞ½Ğ°Ñ ÑÑ…ĞµĞ¼Ğ° Ğ½Ğ°Ğ²Ğ¸Ğ³Ğ°Ñ†Ğ¸Ğ¸

Ğ¡Ğ¼. Ñ„Ğ°Ğ¹Ğ» `InteriorBot-v1-ScreenMap-Full.md` Ğ´Ğ»Ñ Ğ´ĞµÑ‚Ğ°Ğ»ÑŒĞ½Ğ¾Ğ¹ Ğ²Ğ¸Ğ·ÑƒĞ°Ğ»ÑŒĞ½Ğ¾Ğ¹ ĞºĞ°Ñ€Ñ‚Ñ‹ Ğ²ÑĞµÑ… ÑĞºÑ€Ğ°Ğ½Ğ¾Ğ² Ğ¸ Ğ¿ĞµÑ€ĞµÑ…Ğ¾Ğ´Ğ¾Ğ².

### Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ° Ğ²ÑĞµÑ… callback_data Ğ¸ Ğ¸Ñ… Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸ĞºĞ¾Ğ²

| callback_data | ĞĞ±Ñ€Ğ°Ğ±Ğ°Ñ‚Ñ‹Ğ²Ğ°ĞµÑ‚ÑÑ Ğ² | Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ñ | Ğ”ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ | Ğ¡Ğ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğ¹ ÑĞºÑ€Ğ°Ğ½ |
|---------------|------------------|---------|----------|-----------------|
| `main_menu` | `user_start.py`<br>`creation.py`<br>`payment.py` | `back_to_main_menu()`<br>`go_to_main_menu()` | ĞÑ‡Ğ¸ÑÑ‚ĞºĞ° ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ, Ğ¿Ğ¾ĞºĞ°Ğ· Ğ³Ğ»Ğ°Ğ²Ğ½Ğ¾Ğ³Ğ¾ Ğ¼ĞµĞ½Ñ | Ğ“Ğ»Ğ°Ğ²Ğ½Ğ¾Ğµ Ğ¼ĞµĞ½Ñ |
| `create_design` | `user_start.py`<br>`creation.py` | `start_creation()`<br>`choose_new_photo()` | Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° state: `waiting_for_photo` | Ğ˜Ğ½ÑÑ‚Ñ€ÑƒĞºÑ†Ğ¸Ñ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸ Ñ„Ğ¾Ñ‚Ğ¾ |
| `show_profile` | `user_start.py`<br>`creation.py`<br>`payment.py` | `show_profile()`<br>`show_profile_handler()`<br>`show_profile_payment()` | ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ¸Ğ· Ğ‘Ğ”, Ğ¿Ğ¾ĞºĞ°Ğ· Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»Ñ | Ğ­ĞºÑ€Ğ°Ğ½ Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»Ñ |
| `buy_generations` | `user_start.py`<br>`payment.py` | `buy_generations_handler()`<br>`show_packages()` | ĞŸĞ¾ĞºĞ°Ğ· Ğ¿Ğ°ĞºĞµÑ‚Ğ¾Ğ² Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¹ | ĞœĞµĞ½Ñ Ğ¿Ğ¾ĞºÑƒĞ¿ĞºĞ¸ |
| `room_living_room`<br>`room_bedroom`<br>`room_kitchen`<br>`room_office` | `creation.py` | `room_chosen()` | Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ñ‚Ğ¸Ğ¿Ğ° ĞºĞ¾Ğ¼Ğ½Ğ°Ñ‚Ñ‹, Ğ¿ĞµÑ€ĞµÑ…Ğ¾Ğ´ Ğº Ğ²Ñ‹Ğ±Ğ¾Ñ€Ñƒ ÑÑ‚Ğ¸Ğ»Ñ | ĞœĞµĞ½Ñ ÑÑ‚Ğ¸Ğ»ĞµĞ¹ |
| `back_to_room` | `creation.py` | `back_to_room_selection()` | Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‚ Ğº Ğ²Ñ‹Ğ±Ğ¾Ñ€Ñƒ ĞºĞ¾Ğ¼Ğ½Ğ°Ñ‚Ñ‹ | ĞœĞµĞ½Ñ ĞºĞ¾Ğ¼Ğ½Ğ°Ñ‚ |
| `style_modern`<br>`style_minimalist`<br>... (10 ÑÑ‚Ğ¸Ğ»ĞµĞ¹) | `creation.py` | `style_chosen()` | ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ±Ğ°Ğ»Ğ°Ğ½ÑĞ° â†’ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ â†’ Ğ¿Ğ¾ĞºĞ°Ğ· Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ° | Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚ + Ğ¼ĞµĞ½Ñ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğ¹ |
| `change_style` | `creation.py` | `change_style_after_gen()` | ĞŸĞµÑ€ĞµÑ…Ğ¾Ğ´ Ğ¾Ğ±Ñ€Ğ°Ñ‚Ğ½Ğ¾ Ğº Ğ²Ñ‹Ğ±Ğ¾Ñ€Ñƒ ÑÑ‚Ğ¸Ğ»Ñ | ĞœĞµĞ½Ñ ÑÑ‚Ğ¸Ğ»ĞµĞ¹ |
| `pay_10_290`<br>`pay_25_490`<br>`pay_60_990` | `payment.py` | `create_payment()` | Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ¿Ğ»Ğ°Ñ‚ĞµĞ¶Ğ° Ğ² Ğ®ĞšĞ°ÑÑĞµ + Ğ·Ğ°Ğ¿Ğ¸ÑÑŒ Ğ² Ğ‘Ğ” | ĞœĞµĞ½Ñ Ğ¾Ğ¿Ğ»Ğ°Ñ‚Ñ‹ Ñ url |
| `check_payment` | `payment.py` | `check_payment()` | ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ÑÑ‚Ğ°Ñ‚ÑƒÑĞ° Ğ¿Ğ»Ğ°Ñ‚ĞµĞ¶Ğ° Ğ² Ğ®ĞšĞ°ÑÑĞµ | Ğ£ÑĞ¿ĞµÑ… â†’ Ğ³Ğ»Ğ°Ğ²Ğ½Ğ¾Ğµ Ğ¼ĞµĞ½Ñ<br>ĞÑˆĞ¸Ğ±ĞºĞ° â†’ alert |

---

## FSM (Finite State Machine) â€” ĞœĞ°ÑˆĞ¸Ğ½Ğ° ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğ¹

### Ğ“Ñ€Ğ°Ñ„ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğ¹ Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑĞ° ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ñ Ğ´Ğ¸Ğ·Ğ°Ğ¹Ğ½Ğ°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  NO STATE       â”‚  /start Ğ¸Ğ»Ğ¸ main_menu
â”‚  (Ğ½Ğ°Ñ‡Ğ°Ğ»Ğ¾)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ ĞšĞ½Ğ¾Ğ¿ĞºĞ° "Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ´Ğ¸Ğ·Ğ°Ğ¹Ğ½"
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  waiting_for_photo      â”‚
â”‚  ĞĞ¶Ğ¸Ğ´Ğ°Ğ½Ğ¸Ğµ Ñ„Ğ¾Ñ‚Ğ¾          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¾ Ñ„Ğ¾Ñ‚Ğ¾ (message.photo)
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  choose_room            â”‚
â”‚  Ğ’Ñ‹Ğ±Ğ¾Ñ€ Ñ‚Ğ¸Ğ¿Ğ° ĞºĞ¾Ğ¼Ğ½Ğ°Ñ‚Ñ‹     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ Ğ’Ñ‹Ğ±Ñ€Ğ°Ğ½Ğ° ĞºĞ¾Ğ¼Ğ½Ğ°Ñ‚Ğ° (callback room_*)
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  choose_style           â”‚
â”‚  Ğ’Ñ‹Ğ±Ğ¾Ñ€ ÑÑ‚Ğ¸Ğ»Ñ Ğ´Ğ¸Ğ·Ğ°Ğ¹Ğ½Ğ°    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ Ğ’Ñ‹Ğ±Ñ€Ğ°Ğ½ ÑÑ‚Ğ¸Ğ»ÑŒ (callback style_*)
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Ğ“Ğ•ĞĞ•Ğ ĞĞ¦Ğ˜Ğ¯              â”‚
â”‚  (Ğ½Ğµ ÑĞ²Ğ»ÑĞµÑ‚ÑÑ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸ĞµĞ¼â”‚
â”‚   FSM, Ğ½Ğ¾ Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑ)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ğ°
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  NO STATE               â”‚
â”‚  Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚ Ğ¿Ğ¾ĞºĞ°Ğ·Ğ°Ğ½      â”‚
â”‚  Ğ¡Ğ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ Ğ¾Ñ‡Ğ¸Ñ‰ĞµĞ½Ğ¾      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ĞŸĞµÑ€ĞµÑ…Ğ¾Ğ´Ñ‹ Ğ¸ Ñ‚Ñ€Ğ¸Ğ³Ğ³ĞµÑ€Ñ‹

| Ğ¢ĞµĞºÑƒÑ‰ĞµĞµ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ | Ğ¡Ğ¾Ğ±Ñ‹Ñ‚Ğ¸Ğµ | ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ¸ | Ğ”ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ | Ğ¡Ğ»ĞµĞ´ÑƒÑÑ‰ĞµĞµ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ |
|-------------------|---------|----------|----------|---------------------|
| NO STATE | callback: `create_design` | â€” | ĞÑ‡Ğ¸ÑÑ‚ĞºĞ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…, ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ `menu_message_id` | `waiting_for_photo` |
| `waiting_for_photo` | message: photo | ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ°: Ğ½Ğµ Ğ°Ğ»ÑŒĞ±Ğ¾Ğ¼ | Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ `photo_id`, Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ±Ğ°Ğ»Ğ°Ğ½ÑĞ° | `choose_room` (ĞµÑĞ»Ğ¸ Ğ±Ğ°Ğ»Ğ°Ğ½Ñ > 0) Ğ¸Ğ»Ğ¸ NO STATE + Ğ¼ĞµĞ½Ñ Ğ¾Ğ¿Ğ»Ğ°Ñ‚Ñ‹ |
| `waiting_for_photo` | message: photo (Ğ°Ğ»ÑŒĞ±Ğ¾Ğ¼) | `media_group_id` ÑĞ¾Ğ²Ğ¿Ğ°Ğ´Ğ°ĞµÑ‚ | Ğ£Ğ´Ğ°Ğ»ĞµĞ½Ğ¸Ğµ Ñ„Ğ¾Ñ‚Ğ¾, ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğµ | `waiting_for_photo` |
| `choose_room` | callback: `room_*` | ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ±Ğ°Ğ»Ğ°Ğ½ÑĞ° | Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ `room` | `choose_style` |
| `choose_style` | callback: `back_to_room` | â€” | â€” | `choose_room` |
| `choose_style` | callback: `style_*` | ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ±Ğ°Ğ»Ğ°Ğ½ÑĞ° | Ğ¡Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ Ğ±Ğ°Ğ»Ğ°Ğ½ÑĞ°, Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ, Ğ¿Ğ¾ĞºĞ°Ğ· Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ° | NO STATE |
| Ğ›ÑĞ±Ğ¾Ğµ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ | callback: `main_menu` | â€” | ĞÑ‡Ğ¸ÑÑ‚ĞºĞ° ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ | NO STATE |

### Ğ”Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ² state.data

| ĞšĞ»ÑÑ‡ | Ğ¢Ğ¸Ğ¿ | ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ | Ğ–Ğ¸Ğ·Ğ½ĞµĞ½Ğ½Ñ‹Ğ¹ Ñ†Ğ¸ĞºĞ» |
|------|-----|-----------|----------------|
| `menu_message_id` | int | ID Ğ³Ğ»Ğ°Ğ²Ğ½Ğ¾Ğ³Ğ¾ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ Ğ¼ĞµĞ½Ñ Ğ´Ğ»Ñ Ñ€ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ | Ğ¡Ğ¾Ğ·Ğ´Ğ°ĞµÑ‚ÑÑ Ğ¿Ñ€Ğ¸ `/start`, ÑĞ¾Ñ…Ñ€Ğ°Ğ½ÑĞµÑ‚ÑÑ Ğ²ÑĞµĞ³Ğ´Ğ° |
| `photo_id` | str | file_id Ğ·Ğ°Ğ³Ñ€ÑƒĞ¶ĞµĞ½Ğ½Ğ¾Ğ³Ğ¾ Ñ„Ğ¾Ñ‚Ğ¾ | Ğ¡Ğ¾Ğ·Ğ´Ğ°ĞµÑ‚ÑÑ Ğ¿Ñ€Ğ¸ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞµ Ñ„Ğ¾Ñ‚Ğ¾, Ğ¾Ñ‡Ğ¸Ñ‰Ğ°ĞµÑ‚ÑÑ Ğ¿Ñ€Ğ¸ Ğ½Ğ¾Ğ²Ğ¾Ğ¹ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸ |
| `room` | str | Ğ¢Ğ¸Ğ¿ ĞºĞ¾Ğ¼Ğ½Ğ°Ñ‚Ñ‹ (living_room, bedroom, etc.) | Ğ¡Ğ¾Ğ·Ğ´Ğ°ĞµÑ‚ÑÑ Ğ¿Ñ€Ğ¸ Ğ²Ñ‹Ğ±Ğ¾Ñ€Ğµ ĞºĞ¾Ğ¼Ğ½Ğ°Ñ‚Ñ‹, Ğ¾Ñ‡Ğ¸Ñ‰Ğ°ĞµÑ‚ÑÑ Ğ¿Ñ€Ğ¸ Ğ½Ğ¾Ğ²Ğ¾Ğ¹ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸ |
| `media_group_id` | str | ID Ğ°Ğ»ÑŒĞ±Ğ¾Ğ¼Ğ° Ñ„Ğ¾Ñ‚Ğ¾ (Ğ´Ğ»Ñ Ğ·Ğ°Ñ‰Ğ¸Ñ‚Ñ‹ Ğ¾Ñ‚ Ğ´ÑƒĞ±Ğ»Ğ¸ĞºĞ°Ñ‚Ğ¾Ğ²) | Ğ’Ñ€ĞµĞ¼ĞµĞ½Ğ½Ğ¾ Ğ¿Ñ€Ğ¸ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞµ Ğ°Ğ»ÑŒĞ±Ğ¾Ğ¼Ğ° |

---

## Ğ‘Ğ¸Ğ·Ğ½ĞµÑ-Ğ»Ğ¾Ğ³Ğ¸ĞºĞ° Ğ¸ ÑÑ†ĞµĞ½Ğ°Ñ€Ğ¸Ğ¸

### Ğ¡Ñ†ĞµĞ½Ğ°Ñ€Ğ¸Ğ¹ 1: ĞŸĞµÑ€Ğ²Ñ‹Ğ¹ Ğ·Ğ°Ğ¿ÑƒÑĞº Ğ±Ğ¾Ñ‚Ğ°

1. ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ `/start`
2. `user_start.py::cmd_start()`:
   - ĞÑ‡Ğ¸ÑÑ‚ĞºĞ° ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ FSM
   - Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ Ğ² Ğ‘Ğ” Ñ `balance=3` (ĞµÑĞ»Ğ¸ Ğ½Ğµ ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒĞµÑ‚)
   - ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ° Ğ³Ğ»Ğ°Ğ²Ğ½Ğ¾Ğ³Ğ¾ Ğ¼ĞµĞ½Ñ Ñ ĞºĞ½Ğ¾Ğ¿ĞºĞ°Ğ¼Ğ¸
   - Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ `menu_message_id` Ğ² state.data

**Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚:** ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ²Ğ¸Ğ´Ğ¸Ñ‚ Ğ³Ğ»Ğ°Ğ²Ğ½Ğ¾Ğµ Ğ¼ĞµĞ½Ñ Ñ 3 Ğ±ĞµÑĞ¿Ğ»Ğ°Ñ‚Ğ½Ñ‹Ğ¼Ğ¸ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸ÑĞ¼Ğ¸.

---

### Ğ¡Ñ†ĞµĞ½Ğ°Ñ€Ğ¸Ğ¹ 2: Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ´Ğ¸Ğ·Ğ°Ğ¹Ğ½Ğ° (ÑƒÑĞ¿ĞµÑˆĞ½Ñ‹Ğ¹ Ğ¿ÑƒÑ‚ÑŒ)

1. ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ½Ğ°Ğ¶Ğ¸Ğ¼Ğ°ĞµÑ‚ "ğŸ¨ Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ´Ğ¸Ğ·Ğ°Ğ¹Ğ½"
2. `user_start.py::start_creation()`:
   - ĞÑ‡Ğ¸ÑÑ‚ĞºĞ° Ğ¿Ñ€ĞµĞ´Ñ‹Ğ´ÑƒÑ‰Ğ¸Ñ… Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… (ĞºÑ€Ğ¾Ğ¼Ğµ `menu_message_id`)
   - Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ `waiting_for_photo`
   - Ğ ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¼ĞµĞ½Ñ Ğ½Ğ° Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞºÑ†Ğ¸Ñ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸ Ñ„Ğ¾Ñ‚Ğ¾

3. ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ Ñ„Ğ¾Ñ‚Ğ¾
4. `creation.py::photo_uploaded()`:
   - ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ°: Ğ½Ğµ Ğ°Ğ»ÑŒĞ±Ğ¾Ğ¼ Ğ»Ğ¸ ÑÑ‚Ğ¾
   - ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ±Ğ°Ğ»Ğ°Ğ½ÑĞ° (ĞµÑĞ»Ğ¸ Ğ½Ğµ Ğ°Ğ´Ğ¼Ğ¸Ğ½):
     - Ğ•ÑĞ»Ğ¸ Ğ±Ğ°Ğ»Ğ°Ğ½Ñ <= 0 â†’ Ğ¿ĞµÑ€ĞµÑ…Ğ¾Ğ´ Ğº Ğ¼ĞµĞ½Ñ Ğ¾Ğ¿Ğ»Ğ°Ñ‚Ñ‹, Ğ²Ñ‹Ñ…Ğ¾Ğ´
   - Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ `photo_id` Ğ² state.data
   - Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ `choose_room`
   - ĞŸĞ¾ĞºĞ°Ğ· ĞºĞ»Ğ°Ğ²Ğ¸Ğ°Ñ‚ÑƒÑ€Ñ‹ Ğ²Ñ‹Ğ±Ğ¾Ñ€Ğ° ĞºĞ¾Ğ¼Ğ½Ğ°Ñ‚Ñ‹

5. ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ²Ñ‹Ğ±Ğ¸Ñ€Ğ°ĞµÑ‚ ĞºĞ¾Ğ¼Ğ½Ğ°Ñ‚Ñƒ (Ğ½Ğ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€, "Ğ“Ğ¾ÑÑ‚Ğ¸Ğ½Ğ°Ñ")
6. `creation.py::room_chosen()`:
   - ĞŸĞ¾Ğ²Ñ‚Ğ¾Ñ€Ğ½Ğ°Ñ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ±Ğ°Ğ»Ğ°Ğ½ÑĞ°
   - Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ `room` Ğ² state.data
   - Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ `choose_style`
   - ĞŸĞ¾ĞºĞ°Ğ· ĞºĞ»Ğ°Ğ²Ğ¸Ğ°Ñ‚ÑƒÑ€Ñ‹ Ğ²Ñ‹Ğ±Ğ¾Ñ€Ğ° ÑÑ‚Ğ¸Ğ»Ñ (10 ÑÑ‚Ğ¸Ğ»ĞµĞ¹)

7. ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ²Ñ‹Ğ±Ğ¸Ñ€Ğ°ĞµÑ‚ ÑÑ‚Ğ¸Ğ»ÑŒ (Ğ½Ğ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€, "Ğ¡ĞºĞ°Ğ½Ğ´Ğ¸Ğ½Ğ°Ğ²ÑĞºĞ¸Ğ¹")
8. `creation.py::style_chosen()`:
   - Ğ¤Ğ¸Ğ½Ğ°Ğ»ÑŒĞ½Ğ°Ñ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ±Ğ°Ğ»Ğ°Ğ½ÑĞ°
   - ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…: `photo_id`, `room`, `style`
   - Ğ¡Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ Ğ±Ğ°Ğ»Ğ°Ğ½ÑĞ°: `db.decrease_balance(user_id)` (ĞµÑĞ»Ğ¸ Ğ½Ğµ Ğ°Ğ´Ğ¼Ğ¸Ğ½)
   - ĞŸĞ¾ĞºĞ°Ğ· ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ "â³ Ğ“ĞµĞ½ĞµÑ€Ğ¸Ñ€ÑƒÑ Ğ½Ğ¾Ğ²Ñ‹Ğ¹ Ğ´Ğ¸Ğ·Ğ°Ğ¹Ğ½..."
   - Ğ’Ñ‹Ğ·Ğ¾Ğ² `generate_image(photo_id, room, style, bot_token)`
   - ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ URL Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ°
   - ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ° Ñ„Ğ¾Ñ‚Ğ¾ Ñ caption
   - ĞŸĞ¾ĞºĞ°Ğ· Ğ¼ĞµĞ½Ñ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğ¹ Ğ¿Ğ¾ÑĞ»Ğµ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸
   - ĞÑ‡Ğ¸ÑÑ‚ĞºĞ° ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ FSM

**Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚:** ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ĞµÑ‚ Ğ½Ğ¾Ğ²Ğ¾Ğµ Ñ„Ğ¾Ñ‚Ğ¾ Ñ Ğ´Ğ¸Ğ·Ğ°Ğ¹Ğ½Ğ¾Ğ¼, Ğ±Ğ°Ğ»Ğ°Ğ½Ñ ÑƒĞ¼ĞµĞ½ÑŒÑˆĞµĞ½ Ğ½Ğ° 1.

---

### Ğ¡Ñ†ĞµĞ½Ğ°Ñ€Ğ¸Ğ¹ 3: ĞĞµĞ´Ğ¾ÑÑ‚Ğ°Ñ‚Ğ¾Ñ‡Ğ½Ğ¾ Ğ±Ğ°Ğ»Ğ°Ğ½ÑĞ°

1. ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ñ `balance=0` Ğ¿Ñ‹Ñ‚Ğ°ĞµÑ‚ÑÑ ÑĞ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ´Ğ¸Ğ·Ğ°Ğ¹Ğ½
2. Ğ’ Ğ»ÑĞ±Ğ¾Ğ¹ Ñ‚Ğ¾Ñ‡ĞºĞµ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ¸ Ğ±Ğ°Ğ»Ğ°Ğ½ÑĞ° (`photo_uploaded`, `room_chosen`, `style_chosen`):
   - ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ°: `balance <= 0` (Ğ´Ğ»Ñ Ğ½Ğµ-Ğ°Ğ´Ğ¼Ğ¸Ğ½Ğ¾Ğ²)
   - ĞÑ‡Ğ¸ÑÑ‚ĞºĞ° ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ FSM
   - ĞŸĞ¾ĞºĞ°Ğ· Ğ¼ĞµĞ½Ñ Ğ¾Ğ¿Ğ»Ğ°Ñ‚Ñ‹ Ñ Ñ‚ĞµĞºÑÑ‚Ğ¾Ğ¼ `NO_BALANCE_TEXT`
   - Ğ’Ñ‹Ñ…Ğ¾Ğ´ Ğ¸Ğ· Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸ĞºĞ°

**Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚:** ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ¿ĞµÑ€ĞµĞ½Ğ°Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½ Ğ½Ğ° Ğ¿Ğ¾ĞºÑƒĞ¿ĞºÑƒ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¹.

---

### Ğ¡Ñ†ĞµĞ½Ğ°Ñ€Ğ¸Ğ¹ 4: ĞŸĞ¾ĞºÑƒĞ¿ĞºĞ° Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¹

1. ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ½Ğ°Ğ¶Ğ¸Ğ¼Ğ°ĞµÑ‚ "ğŸ’° ĞšÑƒĞ¿Ğ¸Ñ‚ÑŒ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸" (Ğ¸Ğ· Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»Ñ Ğ¸Ğ»Ğ¸ Ğ¿Ñ€Ğ¸ Ğ½ÑƒĞ»ĞµĞ²Ğ¾Ğ¼ Ğ±Ğ°Ğ»Ğ°Ğ½ÑĞµ)
2. `payment.py::show_packages()`:
   - ĞŸĞ¾ĞºĞ°Ğ· Ğ¼ĞµĞ½Ñ Ğ¿Ğ°ĞºĞµÑ‚Ğ¾Ğ²: 10/290â‚½, 25/490â‚½, 60/990â‚½

3. ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ²Ñ‹Ğ±Ğ¸Ñ€Ğ°ĞµÑ‚ Ğ¿Ğ°ĞºĞµÑ‚ (Ğ½Ğ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€, "25 Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¹ - 490 Ñ€ÑƒĞ±.")
4. `payment.py::create_payment()`:
   - ĞŸĞ°Ñ€ÑĞ¸Ğ½Ğ³ callback_data: `pay_25_490` â†’ tokens=25, price=490
   - Ğ’Ñ‹Ğ·Ğ¾Ğ² `payment_api.create_payment_yookassa(amount=490, user_id, tokens=25)`
   - ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ¿Ğ»Ğ°Ñ‚ĞµĞ¶Ğ°: `payment_id`, `confirmation_url`
   - Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ·Ğ°Ğ¿Ğ¸ÑĞ¸ Ğ² Ğ‘Ğ”: `db.create_payment(user_id, payment_id, amount=490, tokens=25)`
   - ĞŸĞ¾ĞºĞ°Ğ· Ğ¼ĞµĞ½Ñ Ñ ĞºĞ½Ğ¾Ğ¿ĞºĞ°Ğ¼Ğ¸:
     - "ĞŸĞµÑ€ĞµĞ¹Ñ‚Ğ¸ Ğº Ğ¾Ğ¿Ğ»Ğ°Ñ‚Ğµ" (url)
     - "ğŸ”„ Ğ¯ Ğ¾Ğ¿Ğ»Ğ°Ñ‚Ğ¸Ğ»! (ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ)"

5. ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ¿ĞµÑ€ĞµÑ…Ğ¾Ğ´Ğ¸Ñ‚ Ğ¿Ğ¾ ÑÑÑ‹Ğ»ĞºĞµ Ğ¸ Ğ¾Ğ¿Ğ»Ğ°Ñ‡Ğ¸Ğ²Ğ°ĞµÑ‚ Ñ‡ĞµÑ€ĞµĞ· Ğ®ĞšĞ°ÑÑÑƒ

6. ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ²Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚ÑÑ Ğ² Ğ±Ğ¾Ñ‚Ğ° Ğ¸ Ğ½Ğ°Ğ¶Ğ¸Ğ¼Ğ°ĞµÑ‚ "ğŸ”„ Ğ¯ Ğ¾Ğ¿Ğ»Ğ°Ñ‚Ğ¸Ğ»!"
7. `payment.py::check_payment()`:
   - ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½ĞµĞ³Ğ¾ pending Ğ¿Ğ»Ğ°Ñ‚ĞµĞ¶Ğ°: `db.get_last_pending_payment(user_id)`
   - Ğ’Ñ‹Ğ·Ğ¾Ğ² `payment_api.find_payment(payment_id)` â†’ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ÑÑ‚Ğ°Ñ‚ÑƒÑĞ° Ğ² Ğ®ĞšĞ°ÑÑĞµ
   - Ğ•ÑĞ»Ğ¸ `succeeded`:
     - ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ÑÑ‚Ğ°Ñ‚ÑƒÑĞ° Ğ² Ğ‘Ğ”: `db.set_payment_success(payment_id)`
     - ĞŸĞ¾Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ğµ Ğ±Ğ°Ğ»Ğ°Ğ½ÑĞ°: `db.add_tokens(user_id, tokens=25)`
     - ĞŸĞ¾ĞºĞ°Ğ· ÑƒÑĞ¿ĞµÑˆĞ½Ğ¾Ğ³Ğ¾ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ Ñ Ğ½Ğ¾Ğ²Ñ‹Ğ¼ Ğ±Ğ°Ğ»Ğ°Ğ½ÑĞ¾Ğ¼
     - ĞŸĞ¾ĞºĞ°Ğ· Ğ³Ğ»Ğ°Ğ²Ğ½Ğ¾Ğ³Ğ¾ Ğ¼ĞµĞ½Ñ
   - Ğ•ÑĞ»Ğ¸ `pending`:
     - Alert: "ĞĞ¿Ğ»Ğ°Ñ‚Ğ° Ğ¿Ğ¾ĞºĞ° Ğ½Ğµ Ğ¿Ğ¾ÑÑ‚ÑƒĞ¿Ğ¸Ğ»Ğ°"

**Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚:** Ğ‘Ğ°Ğ»Ğ°Ğ½Ñ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ ÑƒĞ²ĞµĞ»Ğ¸Ñ‡ĞµĞ½, Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ¿Ñ€Ğ¾Ğ´Ğ¾Ğ»Ğ¶Ğ°Ñ‚ÑŒ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸.

---

### Ğ¡Ñ†ĞµĞ½Ğ°Ñ€Ğ¸Ğ¹ 5: ĞĞ»ÑŒÑ‚ĞµÑ€Ğ½Ğ°Ñ‚Ğ¸Ğ²Ğ½Ñ‹Ğµ ÑÑ‚Ğ¸Ğ»Ğ¸ Ğ´Ğ»Ñ Ñ‚Ğ¾Ğ³Ğ¾ Ğ¶Ğµ Ñ„Ğ¾Ñ‚Ğ¾

1. ĞŸĞ¾ÑĞ»Ğµ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ²Ğ¸Ğ´Ğ¸Ñ‚ Ğ¼ĞµĞ½Ñ:
   - "ğŸ”„ Ğ”Ñ€ÑƒĞ³Ğ¾Ğ¹ ÑÑ‚Ğ¸Ğ»ÑŒ Ğ´Ğ»Ñ ÑÑ‚Ğ¾Ğ³Ğ¾ Ñ„Ğ¾Ñ‚Ğ¾"
   - "ğŸ“¸ Ğ—Ğ°Ğ³Ñ€ÑƒĞ·Ğ¸Ñ‚ÑŒ Ğ½Ğ¾Ğ²Ğ¾Ğµ Ñ„Ğ¾Ñ‚Ğ¾"

2. ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ½Ğ°Ğ¶Ğ¸Ğ¼Ğ°ĞµÑ‚ "ğŸ”„ Ğ”Ñ€ÑƒĞ³Ğ¾Ğ¹ ÑÑ‚Ğ¸Ğ»ÑŒ"
3. `creation.py::change_style_after_gen()`:
   - Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ `choose_style`
   - ĞŸĞ¾ĞºĞ°Ğ· Ğ¼ĞµĞ½Ñ ÑÑ‚Ğ¸Ğ»ĞµĞ¹
   - **Ğ’Ğ°Ğ¶Ğ½Ğ¾:** `photo_id` Ğ¸ `room` Ğ¾ÑÑ‚Ğ°ÑÑ‚ÑÑ Ğ² state.data

4. ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ²Ñ‹Ğ±Ğ¸Ñ€Ğ°ĞµÑ‚ Ğ´Ñ€ÑƒĞ³Ğ¾Ğ¹ ÑÑ‚Ğ¸Ğ»ÑŒ
5. `creation.py::style_chosen()`:
   - Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒÑÑ‚ÑÑ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ½Ñ‹Ğµ `photo_id` Ğ¸ `room`
   - ĞĞ¾Ğ²Ñ‹Ğ¹ `style`
   - Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ Ñ Ñ‚ĞµĞ¼Ğ¸ Ğ¶Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğ¼Ğ¸

**Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚:** ĞĞ¾Ğ²Ñ‹Ğ¹ Ğ´Ğ¸Ğ·Ğ°Ğ¹Ğ½ Ğ´Ğ»Ñ Ñ‚Ğ¾Ğ³Ğ¾ Ğ¶Ğµ Ñ„Ğ¾Ñ‚Ğ¾ Ğ² Ğ´Ñ€ÑƒĞ³Ğ¾Ğ¼ ÑÑ‚Ğ¸Ğ»Ğµ, Ğ±ĞµĞ· Ğ¿Ğ¾Ğ²Ñ‚Ğ¾Ñ€Ğ½Ğ¾Ğ¹ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸ Ñ„Ğ¾Ñ‚Ğ¾.

---

## API Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ğ¸

### Replicate API (services/replicate_api.py)

**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğ¹ Ğ´Ğ¸Ğ·Ğ°Ğ¹Ğ½Ğ° Ğ¸Ğ½Ñ‚ĞµÑ€ÑŒĞµÑ€Ğ° Ñ‡ĞµÑ€ĞµĞ· Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒ AI.

**ĞÑĞ½Ğ¾Ğ²Ğ½Ğ°Ñ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ñ:**

```python
async def generate_image(photo_id: str, room: str, style: str, bot_token: str) -> Optional[str]
```

**ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹:**
- `photo_id` â€” file_id Ñ„Ğ¾Ñ‚Ğ¾ Ğ¸Ğ· Telegram
- `room` â€” Ñ‚Ğ¸Ğ¿ ĞºĞ¾Ğ¼Ğ½Ğ°Ñ‚Ñ‹ (living_room, bedroom, kitchen, office)
- `style` â€” ÑÑ‚Ğ¸Ğ»ÑŒ Ğ´Ğ¸Ğ·Ğ°Ğ¹Ğ½Ğ° (modern, minimalist, scandinavian, ...)
- `bot_token` â€” Ñ‚Ğ¾ĞºĞµĞ½ Ğ±Ğ¾Ñ‚Ğ° Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ñ Ñ„Ğ°Ğ¹Ğ»Ğ°

**ĞŸÑ€Ğ¾Ñ†ĞµÑÑ:**
1. ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ URL Ñ„Ğ¾Ñ‚Ğ¾ Ñ‡ĞµÑ€ĞµĞ· Telegram Bot API
2. Ğ¡ĞºĞ°Ñ‡Ğ¸Ğ²Ğ°Ğ½Ğ¸Ğµ Ñ„Ğ¾Ñ‚Ğ¾ Ñ‡ĞµÑ€ĞµĞ· httpx
3. ĞšĞ¾Ğ´Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ² base64
4. Ğ¤Ğ¾Ñ€Ğ¼Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¿Ñ€Ğ¾Ğ¼Ğ¿Ñ‚Ğ°:
   ```
   "Interior design of a [room] in [style] style, high quality, photorealistic"
   ```
5. Ğ’Ñ‹Ğ·Ğ¾Ğ² replicate Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸:
   ```python
   replicate.run(
       "adirik/interior-design",
       input={
           "image": f"data:image/jpeg;base64,{base64_str}",
           "prompt": prompt,
           "room_type": room,
           "num_inference_steps": 50,
           "guidance_scale": 7.5
       }
   )
   ```
6. Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‚ URL ÑĞ³ĞµĞ½ĞµÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ¾Ğ³Ğ¾ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ñ

**ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº:**
- Timeout Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸ (60 ÑĞµĞºÑƒĞ½Ğ´)
- ĞÑˆĞ¸Ğ±ĞºĞ¸ API
- ĞĞµĞ²Ğ°Ğ»Ğ¸Ğ´Ğ½Ñ‹Ğ¹ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚
- Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‚ `None` Ğ² ÑĞ»ÑƒÑ‡Ğ°Ğµ Ğ¾ÑˆĞ¸Ğ±ĞºĞ¸

---

### YooKassa Payment API (services/payment_api.py)

**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ¸ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ¿Ğ»Ğ°Ñ‚ĞµĞ¶ĞµĞ¹ Ñ‡ĞµÑ€ĞµĞ· Ğ®ĞšĞ°ÑÑĞ°.

#### Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ñ 1: `create_payment_yookassa(amount, user_id, tokens)`

**ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹:**
- `amount` (int) â€” ÑÑƒĞ¼Ğ¼Ğ° Ğ² Ñ€ÑƒĞ±Ğ»ÑÑ…
- `user_id` (int) â€” Telegram ID Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ
- `tokens` (int) â€” ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¹

**ĞŸÑ€Ğ¾Ñ†ĞµÑÑ:**
1. Ğ˜Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ YooKassa Ñ `SHOP_ID` Ğ¸ `SECRET_KEY`
2. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ¿Ğ»Ğ°Ñ‚ĞµĞ¶Ğ°:
   ```python
   payment = Payment.create({
       "amount": {"value": str(amount), "currency": "RUB"},
       "confirmation": {"type": "redirect", "return_url": "..."},
       "capture": True,
       "description": f"{tokens} Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¹ Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ {user_id}"
   })
   ```
3. Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‚ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…:
   ```python
   {
       'id': payment.id,
       'amount': amount,
       'tokens': tokens,
       'confirmation_url': payment.confirmation.confirmation_url
   }
   ```

**ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº:**
- Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‚ `None` Ğ¿Ñ€Ğ¸ Ğ¾ÑˆĞ¸Ğ±ĞºĞ°Ñ… API

---

#### Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ñ 2: `find_payment(payment_id)`

**ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹:**
- `payment_id` (str) â€” ID Ğ¿Ğ»Ğ°Ñ‚ĞµĞ¶Ğ° Ğ² Ğ®ĞšĞ°ÑÑĞµ

**ĞŸÑ€Ğ¾Ñ†ĞµÑÑ:**
1. Ğ—Ğ°Ğ¿Ñ€Ğ¾Ñ ÑÑ‚Ğ°Ñ‚ÑƒÑĞ° Ğ¿Ğ»Ğ°Ñ‚ĞµĞ¶Ğ°:
   ```python
   payment = Payment.find_one(payment_id)
   ```
2. ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ÑÑ‚Ğ°Ñ‚ÑƒÑĞ°:
   ```python
   return payment.status == "succeeded"
   ```

**Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚:**
- `True` â€” ĞµÑĞ»Ğ¸ Ğ¿Ğ»Ğ°Ñ‚ĞµĞ¶ ÑƒÑĞ¿ĞµÑˆĞµĞ½
- `False` â€” ĞµÑĞ»Ğ¸ Ğ¾Ğ¶Ğ¸Ğ´Ğ°ĞµÑ‚ Ğ¾Ğ¿Ğ»Ğ°Ñ‚Ñ‹ Ğ¸Ğ»Ğ¸ Ğ¾ÑˆĞ¸Ğ±ĞºĞ°

---

## ĞÑĞ¾Ğ±ĞµĞ½Ğ½Ğ¾ÑÑ‚Ğ¸ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸

### 1. Ğ•Ğ´Ğ¸Ğ½Ğ¾Ğµ Ğ¼ĞµĞ½Ñ (Single Menu Pattern)

**ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°:** Ğ’ Telegram Ğ½ĞµĞ²Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ¸Ğ¼ĞµÑ‚ÑŒ Ğ´Ğ²Ğ° Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ñ… inline-Ğ¼ĞµĞ½Ñ Ğ¾Ğ´Ğ½Ğ¾Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ğ¾ Ğ±ĞµĞ· Ğ²Ğ¸Ğ·ÑƒĞ°Ğ»ÑŒĞ½Ğ¾Ğ³Ğ¾ Ğ¼ÑƒÑĞ¾Ñ€Ğ°.

**Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ:**
- Ğ’ÑĞµ Ğ½Ğ°Ğ²Ğ¸Ğ³Ğ°Ñ†Ğ¸Ğ¾Ğ½Ğ½Ñ‹Ğµ Ğ¿ĞµÑ€ĞµÑ…Ğ¾Ğ´Ñ‹ Ñ€ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€ÑƒÑÑ‚ **Ğ¾Ğ´Ğ½Ğ¾ Ğ¸ Ñ‚Ğ¾ Ğ¶Ğµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ**
- Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ `menu_message_id` Ğ² `state.data`
- Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ñ `show_single_menu()` Ğ² `creation.py`:
  ```python
  async def show_single_menu(sender, state, text, keyboard):
      data = await state.get_data()
      old_menu_id = data.get('menu_message_id')
      
      if old_menu_id:
          try:
              # ĞŸÑ‹Ñ‚Ğ°ĞµĞ¼ÑÑ Ğ¾Ñ‚Ñ€ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰ĞµĞµ
              await sender.bot.edit_message_text(...)
              return old_menu_id
          except:
              pass
      
      # Ğ•ÑĞ»Ğ¸ Ğ½Ğµ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸Ğ»Ğ¾ÑÑŒ â€” ÑĞ¾Ğ·Ğ´Ğ°ĞµĞ¼ Ğ½Ğ¾Ğ²Ğ¾Ğµ
      menu = await sender.answer(text, reply_markup=keyboard)
      await state.update_data(menu_message_id=menu.message_id)
      
      # Ğ£Ğ´Ğ°Ğ»ÑĞµĞ¼ ÑÑ‚Ğ°Ñ€Ğ¾Ğµ
      if old_menu_id:
          try:
              await sender.bot.delete_message(old_menu_id)
          except:
              pass
      
      return menu.message_id
  ```

**Ğ­Ñ„Ñ„ĞµĞºÑ‚:** Ğ§Ğ¸ÑÑ‚Ñ‹Ğ¹ UX Ğ±ĞµĞ· Ğ´ÑƒĞ±Ğ»Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ ĞºĞ½Ğ¾Ğ¿Ğ¾Ğº Ğ¸ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹.

---

### 2. Ğ—Ğ°Ñ‰Ğ¸Ñ‚Ğ° Ğ¾Ñ‚ Ğ°Ğ»ÑŒĞ±Ğ¾Ğ¼Ğ¾Ğ² Ñ„Ğ¾Ñ‚Ğ¾

**ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°:** ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ½ĞµÑĞºĞ¾Ğ»ÑŒĞºĞ¾ Ñ„Ğ¾Ñ‚Ğ¾ Ğ°Ğ»ÑŒĞ±Ğ¾Ğ¼Ğ¾Ğ¼, Ñ‡Ñ‚Ğ¾ Ğ²Ñ‹Ğ·Ğ¾Ğ²ĞµÑ‚ Ğ¼Ğ½Ğ¾Ğ¶ĞµÑÑ‚Ğ²ĞµĞ½Ğ½ÑƒÑ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºÑƒ.

**Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ:**
- ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° `message.media_group_id`
- ĞšĞµÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½ĞµĞ³Ğ¾ `media_group_id` Ğ² state.data
- ĞŸÑ€Ğ¸ Ğ¿Ğ¾Ğ²Ñ‚Ğ¾Ñ€Ğ½Ğ¾Ğ¼ Ñ„Ğ¾Ñ‚Ğ¾ Ğ¸Ğ· Ñ‚Ğ¾Ğ³Ğ¾ Ğ¶Ğµ Ğ°Ğ»ÑŒĞ±Ğ¾Ğ¼Ğ°:
  - Ğ£Ğ´Ğ°Ğ»ĞµĞ½Ğ¸Ğµ Ñ„Ğ¾Ñ‚Ğ¾
  - ĞĞ´Ğ½Ğ¾ĞºÑ€Ğ°Ñ‚Ğ½Ğ¾Ğµ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğµ Ñ Ğ°Ğ²Ñ‚Ğ¾ÑƒĞ´Ğ°Ğ»ĞµĞ½Ğ¸ĞµĞ¼ Ñ‡ĞµÑ€ĞµĞ· 3 ÑĞµĞºÑƒĞ½Ğ´Ñ‹

```python
if message.media_group_id:
    data = await state.get_data()
    cached_group_id = data.get('media_group_id')
    
    await message.delete()
    
    if cached_group_id != message.media_group_id:
        await state.update_data(media_group_id=message.media_group_id)
        msg = await message.answer(TOO_MANY_PHOTOS_TEXT)
        await asyncio.sleep(3)
        await msg.delete()
    return
```

---

### 3. ĞœĞ½Ğ¾Ğ³Ğ¾ÑƒÑ€Ğ¾Ğ²Ğ½ĞµĞ²Ğ°Ñ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ±Ğ°Ğ»Ğ°Ğ½ÑĞ°

**Ğ“Ğ´Ğµ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ÑĞµÑ‚ÑÑ:**
1. `photo_uploaded()` â€” Ğ¿Ñ€Ğ¸ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞµ Ñ„Ğ¾Ñ‚Ğ¾
2. `room_chosen()` â€” Ğ¿Ñ€Ğ¸ Ğ²Ñ‹Ğ±Ğ¾Ñ€Ğµ ĞºĞ¾Ğ¼Ğ½Ğ°Ñ‚Ñ‹
3. `style_chosen()` â€” Ğ¿ĞµÑ€ĞµĞ´ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸ĞµĞ¹

**ĞŸÑ€Ğ¸Ñ‡Ğ¸Ğ½Ğ°:** ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ¿Ğ¾Ñ‚Ñ€Ğ°Ñ‚Ğ¸Ñ‚ÑŒ Ğ±Ğ°Ğ»Ğ°Ğ½Ñ Ğ² Ğ´Ñ€ÑƒĞ³Ğ¾Ğ¹ ÑĞµÑÑĞ¸Ğ¸ Ğ¼ĞµĞ¶Ğ´Ñƒ ÑˆĞ°Ğ³Ğ°Ğ¼Ğ¸.

**Ğ˜ÑĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ:** ĞĞ´Ğ¼Ğ¸Ğ½Ğ¸ÑÑ‚Ñ€Ğ°Ñ‚Ğ¾Ñ€Ñ‹ (Ğ¸Ğ· `ADMIN_IDS`) Ğ³ĞµĞ½ĞµÑ€Ğ¸Ñ€ÑƒÑÑ‚ Ğ±ĞµĞ· ÑĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ñ Ğ±Ğ°Ğ»Ğ°Ğ½ÑĞ°.

---

### 4. Ğ‘Ğ»Ğ¾ĞºĞ¸Ñ€Ğ¾Ğ²ĞºĞ° Ğ½ĞµĞ¶ĞµĞ»Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ñ… ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹

**Ğ¦ĞµĞ»ÑŒ:** ĞŸÑ€Ğ¸Ğ½ÑƒĞ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾Ğµ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ ĞºĞ½Ğ¾Ğ¿Ğ¾Ğº Ğ²Ğ¼ĞµÑÑ‚Ğ¾ Ñ‚ĞµĞºÑÑ‚Ğ¾Ğ²Ñ‹Ñ… ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´.

**Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ:**
- Ğ¥ÑĞ½Ğ´Ğ»ĞµÑ€Ñ‹ Ñ Ğ½Ğ¸Ğ·ĞºĞ¸Ğ¼ Ğ¿Ñ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚Ğ¾Ğ¼ (Ğ² ĞºĞ¾Ğ½Ñ†Ğµ Ñ€Ğ¾ÑƒÑ‚ĞµÑ€Ğ° `creation.py`):
  - `F.text` â†’ ÑƒĞ´Ğ°Ğ»ĞµĞ½Ğ¸Ğµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ
  - `F.video | F.document | F.sticker ...` â†’ ÑƒĞ´Ğ°Ğ»ĞµĞ½Ğ¸Ğµ
  - `F.photo` (Ğ²Ğ½Ğµ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ) â†’ ÑƒĞ´Ğ°Ğ»ĞµĞ½Ğ¸Ğµ + Ğ¿Ñ€ĞµĞ´ÑƒĞ¿Ñ€ĞµĞ¶Ğ´ĞµĞ½Ğ¸Ğµ

```python
@router.message(F.text)
async def block_all_text_messages(message: Message):
    try:
        await message.delete()
    except:
        pass
```

---

## Ğ ĞµĞ·ÑĞ¼Ğµ

**InteriorBot v1** â€” ÑÑ‚Ğ¾ Ğ¿Ğ¾Ğ»Ğ½Ğ¾Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Telegram-Ğ±Ğ¾Ñ‚ Ğ´Ğ»Ñ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸ Ğ´Ğ¸Ğ·Ğ°Ğ¹Ğ½Ğ° Ğ¸Ğ½Ñ‚ĞµÑ€ÑŒĞµÑ€Ğ¾Ğ² Ñ:

- **FSM-ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸ĞµĞ¼** Ñ‡ĞµÑ€ĞµĞ· aiogram 3.x
- **ĞÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ½Ğ¾Ğ¹ Ğ±Ğ°Ğ·Ğ¾Ğ¹ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…** SQLite (aiosqlite)
- **Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸ĞµĞ¹ Ñ Replicate AI** Ğ´Ğ»Ñ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğ¹
- **ĞœĞ¾Ğ½ĞµÑ‚Ğ¸Ğ·Ğ°Ñ†Ğ¸ĞµĞ¹ Ñ‡ĞµÑ€ĞµĞ· Ğ®ĞšĞ°ÑÑĞ°** Ñ Ñ‚Ñ€ĞµĞ¼Ñ Ğ¿Ğ°ĞºĞµÑ‚Ğ°Ğ¼Ğ¸ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¹
- **Ğ§Ğ¸ÑÑ‚Ñ‹Ğ¼ UX** Ñ‡ĞµÑ€ĞµĞ· single menu pattern Ğ¸ Ğ·Ğ°Ñ‰Ğ¸Ñ‚Ñƒ Ğ¾Ñ‚ ÑĞ¿Ğ°Ğ¼Ğ°
- **Ğ“Ğ¸Ğ±ĞºĞ¾Ğ¹ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ¾Ğ¹** Ñ Ñ€Ğ°Ğ·Ğ´ĞµĞ»ĞµĞ½Ğ¸ĞµĞ¼ Ğ½Ğ° handlers, services, keyboards, utils

**ĞšĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ¸:**
- 3 Ğ±ĞµÑĞ¿Ğ»Ğ°Ñ‚Ğ½Ñ‹Ğµ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸ Ğ´Ğ»Ñ Ğ½Ğ¾Ğ²Ñ‹Ñ… Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹
- 10 ÑÑ‚Ğ¸Ğ»ĞµĞ¹ Ğ´Ğ¸Ğ·Ğ°Ğ¹Ğ½Ğ° Ğ½Ğ° Ğ²Ñ‹Ğ±Ğ¾Ñ€
- 4 Ñ‚Ğ¸Ğ¿Ğ° ĞºĞ¾Ğ¼Ğ½Ğ°Ñ‚
- 3 Ğ¿Ğ°ĞºĞµÑ‚Ğ° Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¹ (10/25/60 Ğ·Ğ° 290â‚½/490â‚½/990â‚½)
- ĞŸĞ¾Ğ»Ğ½Ğ°Ñ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ° inline-Ğ½Ğ°Ğ²Ğ¸Ğ³Ğ°Ñ†Ğ¸Ğ¸
- Ğ—Ğ°Ñ‰Ğ¸Ñ‚Ğ° Ğ¾Ñ‚ Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº Ğ¸ Ğ·Ğ»Ğ¾ÑƒĞ¿Ğ¾Ñ‚Ñ€ĞµĞ±Ğ»ĞµĞ½Ğ¸Ğ¹

**Ğ¢ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ ÑÑ‚ĞµĞº:**
- Python 3.10+
- aiogram 3.x (Telegram Bot API)
- aiosqlite (Ğ°ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ½Ğ°Ñ SQLite)
- replicate (AI Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ)
- yookassa (Ğ¿Ğ»Ğ°Ñ‚ĞµĞ¶Ğ¸)
- python-dotenv (ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ)
